import t,{useState as e,useEffect as a}from"react";import r from"dayjs";import{ResponsiveContainer as n,LineChart as i,CartesianGrid as s,XAxis as m,YAxis as o,Tooltip as c,Legend as l,Line as p,ReferenceLine as u}from"recharts";function f(t,e,a){if(a||2===arguments.length)for(var r,n=0,i=e.length;n<i;n++)!r&&n in e||(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return t.concat(r||Array.prototype.slice.call(e))}function A(r){var n=e((function(){var t=localStorage.getItem("rt_database");return null!==t?JSON.parse(t):{listOfAttempts:[],bestAttempts:[],averageOfAllAttemps:0}})),i=n[0],s=n[1],m=e(0),o=m[0],c=m[1],l=e(0),p=l[0],u=l[1],A=e("Click the box when Red Turns Green"),d=A[0],h=A[1],g=e(0),T=g[0],b=g[1],O=e(void 0),y=O[0],v=O[1],E=r.waitTime?r.waitTime:5e3,w=void 0===r.needInstruction||r.needInstruction;return a((function(){localStorage.setItem("rt_database",JSON.stringify(i))}),[i]),t.createElement("div",{className:"".concat(r.className," ").concat(0===o||4===o?"bg-cyan-500":1===o?"bg-red-500":"bg-green-500"),onClick:function(){0===o?(c(1),h("wait for it"),v(setTimeout((function(){c(2),u(Date.now()),h("press now!")}),Math.floor(Math.random()*(E-1e3+1)+1e3)))):1===o?(clearTimeout(y),r.onReactionTimeChange(0),h("You Pressed Early"),c(0)):(b(Date.now()-p),r.onReactionTimeChange(Date.now()-p),h("Nice Job!"),T>0&&(T<Math.min.apply(Math,i.bestAttempts.map((function(t){return t.reactionTime})))?s({listOfAttempts:f(f([],i.listOfAttempts,!0),[{reactionTime:T,testTime:Date.now()}],!1),averageOfAllAttemps:i.listOfAttempts.map((function(t){return t.reactionTime})).reduce((function(t,e,a,r){return t+e/r.length}),0),bestAttempts:f(f([],i.bestAttempts,!0),[{reactionTime:T,testTime:Date.now()}],!1)}):void 0!==i.bestAttempts[i.bestAttempts.length-1].reactionTime&&s({listOfAttempts:f(f([],i.listOfAttempts,!0),[{reactionTime:T,testTime:Date.now()}],!1),averageOfAllAttemps:i.listOfAttempts.map((function(t){return t.reactionTime})).reduce((function(t,e,a,r){return t+e/r.length}),0),bestAttempts:f(f([],i.bestAttempts,!0),[{reactionTime:i.bestAttempts[i.bestAttempts.length-1].reactionTime,testTime:Date.now()}],!1)})),c(0))}},w&&t.createElement("p",{className:r.instructionsClassName},d),r.children)}function d(f){var A=e((function(){var t=localStorage.getItem("rt_database");return null!==t?JSON.parse(t):{latestAttempt:{},listOfAttempts:[],bestAttempts:[],averageOfAllAttemps:0}})),d=A[0],h=A[1];return a((function(){h((function(){var t=localStorage.getItem("rt_database");return null!==t?JSON.parse(t):{latestAttempt:{},listOfAttempts:[],bestAttempts:[],averageOfAllAttemps:0}}))}),[f.onReactionTimeChange]),t.createElement("div",{className:f.className},t.createElement(n,{width:f.width?f.width:"100%",height:f.height?f.height:"100%"},t.createElement(i,{margin:{top:5,right:30,left:20,bottom:5},data:d.listOfAttempts.map((function(t){return{reactioNTime:t.reactionTime,date:t.testTime}}))},t.createElement(s,{strokeDasharray:"3 3"}),t.createElement(m,{fontSize:10,dataKey:"date",tickFormatter:function(t){return r(t).format("YYYY-MM-DD hh:mm:ss")},type:"number",domain:["auto","auto"]}),t.createElement(o,{fontSize:10,dataKey:"reactionTime"}),t.createElement(c,{labelClassName:"text-sm font-bold",labelFormatter:function(t){return r(t).format("YYYY-MM-DD hh:mm:ss")}}),t.createElement(l,null),t.createElement(p,{type:"stepAfter",dataKey:"bestAttempt",stroke:"#8884d8",data:d.bestAttempts.map((function(t){return{bestAttempt:t.reactionTime,date:t.testTime}}))}),t.createElement(p,{type:"monotone",dataKey:"reactionTime",stroke:"#000",data:d.listOfAttempts.map((function(t){return{reactionTime:t.reactionTime,date:t.testTime}}))}),t.createElement(u,{y:d.averageOfAllAttemps,stroke:"red",strokeDasharray:"3 3"}))))}"function"==typeof SuppressedError&&SuppressedError;export{d as Analytics,A as ReactionTime};
//# sourceMappingURL=index.js.map
